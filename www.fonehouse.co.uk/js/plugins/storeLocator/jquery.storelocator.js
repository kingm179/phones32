/*!For license information please see jquery.storelocator.js.LICENSE.txt*/(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}!function(e,s,i,n){"use strict";var a="storeLocator";if(void 0===e.fn[a]&&"undefined"!=typeof google){var o,r,l,g,c,h,u,d,p,m,f,b,v,y,k,w,D,L,S,C=[],M=[],I=[],x=[],F={},P={},R={},O={},T={ajaxData:null,altDistanceNoResult:!1,autoComplete:!1,autoCompleteDisableListener:!1,autoCompleteOptions:{},autoGeocode:!1,bounceMarker:!0,catMarkers:null,dataLocation:"data/locations.json",dataRaw:null,dataType:"json",debug:!1,defaultLat:null,defaultLng:null,defaultLoc:!1,disableAlphaMarkers:!1,distanceAlert:60,dragSearch:!1,exclusiveFiltering:!1,exclusiveTax:null,featuredLocations:!1,fullMapStart:!1,fullMapStartBlank:!1,fullMapStartListLimit:!1,infoBubble:null,inlineDirections:!1,lengthUnit:"m",listColor1:"#ffffff",listColor2:"#eeeeee",loading:!1,locationsPerPage:10,mapSettings:{mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:12},markerCluster:null,markerImg:null,markerDim:null,maxDistance:!1,modal:!1,nameAttribute:"name",nameSearch:!1,noForm:!1,openNearest:!1,originMarker:!1,originMarkerDim:null,originMarkerImg:null,pagination:!1,querystringParams:!1,selectedMarkerImg:null,selectedMarkerImgDim:null,sessionStorage:!1,slideMap:!0,sortBy:null,storeLimit:100,taxonomyFilters:null,visibleMarkersList:!1,xmlElement:"marker",addressID:"bh-sl-address",closeIcon:"bh-sl-close-icon",formContainer:"bh-sl-form-container",formID:"bh-sl-user-location",geocodeID:null,lengthSwapID:"bh-sl-length-swap",loadingContainer:"bh-sl-loading",locationList:"bh-sl-loc-list",mapID:"bh-sl-map",maxDistanceID:"bh-sl-maxdistance",modalContent:"bh-sl-modal-content",modalWindow:"bh-sl-modal-window",orderID:"bh-sl-order",overlay:"bh-sl-overlay",regionID:"bh-sl-region",searchID:"bh-sl-search",sortID:"bh-sl-sort",taxonomyFiltersContainer:"bh-sl-filters-container",infowindowTemplatePath:"assets/js/plugins/storeLocator/templates/infowindow-description.html",listTemplatePath:"assets/js/plugins/storeLocator/templates/location-list-description.html",KMLinfowindowTemplatePath:"assets/js/plugins/storeLocator/templates/kml-infowindow-description.html",KMLlistTemplatePath:"assets/js/plugins/storeLocator/templates/kml-location-list-description.html",listTemplateID:null,infowindowTemplateID:null,callbackAutoGeoSuccess:null,callbackBeforeSend:null,callbackCloseDirections:null,callbackCreateMarker:null,callbackDirectionsRequest:null,callbackFilters:null,callbackFormVals:null,callbackGeocodeRestrictions:null,callbackJsonp:null,callbackListClick:null,callbackMapSet:null,callbackMarkerClick:null,callbackModalClose:null,callbackModalOpen:null,callbackModalReady:null,callbackNearestLoc:null,callbackNoResults:null,callbackNotify:null,callbackOrder:null,callbackPageChange:null,callbackRegion:null,callbackSorting:null,callbackSuccess:null,addressErrorAlert:"Unable to find address",autoGeocodeErrorAlert:"Automatic location detection failed. Please fill in your address or zip code.",distanceErrorAlert:"Unfortunately, our closest location is more than ",kilometerLang:"kilometer",kilometersLang:"kilometers",mileLang:"mile",milesLang:"miles",noResultsTitle:"No results",noResultsDesc:"No locations were found with the given criteria. Please modify your selections or input.",nextPage:"Next &raquo;",prevPage:"&laquo; Prev"};e.extend(A.prototype,{init:function(){var t=this;if(this.writeDebug("init"),"km"===this.settings.lengthUnit?R.EarthRadius=6367:R.EarthRadius=3956,g="kml"===this.settings.dataType?"xml":this.settings.dataType,!0===this.settings.inlineDirections&&e("."+this.settings.locationList).prepend('<div class="bh-sl-directions-panel"></div>'),u=this.settings.mapSettings.zoom,Handlebars.registerHelper("niceURL",(function(t){if(t)return t.replace("https://","").replace("http://","")})),null!==this.settings.taxonomyFilters&&this.taxonomyFiltering(),this.sorting(),this.order(),!0===this.settings.modal&&(null!==this.settings.taxonomyFilters&&e("."+this.settings.taxonomyFiltersContainer).clone(!0,!0).prependTo(o),o.wrap('<div class="'+this.settings.overlay+'"><div class="'+this.settings.modalWindow+'"><div class="'+this.settings.modalContent+'">'),e("."+this.settings.modalWindow).prepend('<div class="'+this.settings.closeIcon+'"></div>'),e("."+this.settings.overlay).hide()),!0===this.settings.autoComplete){var s=i.getElementById(this.settings.addressID),n=new google.maps.places.Autocomplete(s,this.settings.autoCompleteOptions);!0===this.settings.autoComplete&&!0!==this.settings.autoCompleteDisableListener&&n.addListener("place_changed",(function(e){t.processForm(e)}))}this._loadTemplates()},destroy:function(){this.writeDebug("destroy"),this.reset();var t=e("#"+this.settings.mapID);if(x.length)for(var s=0;s<=x.length;s++)google.maps.event.removeListener(x[s]);e("."+this.settings.locationList+" ul").empty(),t.hasClass("bh-sl-map-open")&&t.empty().removeClass("bh-sl-map-open"),!0===this.settings.modal&&e(". "+this.settings.overlay).remove(),t.attr("style",""),o.hide(),e.removeData(o.get(0)),e(i).off(a),o.unbind()},reset:function(){if(this.writeDebug("reset"),M=[],C=[],I=[],x=[],L=!1,e(i).off("click."+a,"."+this.settings.locationList+" li"),e("."+this.settings.locationList+" .bh-sl-close-directions-container").length&&e(".bh-sl-close-directions-container").remove(),!0===this.settings.inlineDirections){var t=e("."+this.settings.locationList+" .adp");t.length>0&&(t.remove(),e("."+this.settings.locationList+" ul").fadeIn()),e(i).off("click","."+this.settings.locationList+" li .loc-directions a")}!0===this.settings.pagination&&e(i).off("click."+a,".bh-sl-pagination li")},formFiltersReset:function(){if(this.writeDebug("formFiltersReset"),null!==this.settings.taxonomyFilters){var s=e("."+this.settings.taxonomyFiltersContainer+" input"),i=e("."+this.settings.taxonomyFiltersContainer+" select");"object"===t(s)&&(s.each((function(){(e(this).is('input[type="checkbox"]')||e(this).is('input[type="radio"]'))&&e(this).prop("checked",!1)})),i.each((function(){e(this).prop("selectedIndex",0)})))}},mapReload:function(){this.writeDebug("mapReload"),this.reset(),S=!0,null!==this.settings.taxonomyFilters&&(this.formFiltersReset(),this.taxonomyFiltersInit()),f&&b?(this.settings.mapSettings.zoom=u,this.processForm()):this.mapping(O)},notify:function(t){this.writeDebug("notify",t),this.settings.callbackNotify?this.settings.callbackNotify.call(this,t):alert(t)},geoCodeCalcToRadian:function(t){return this.writeDebug("geoCodeCalcToRadian",t),t*(Math.PI/180)},geoCodeCalcDiffRadian:function(t,e){return this.writeDebug("geoCodeCalcDiffRadian",arguments),this.geoCodeCalcToRadian(e)-this.geoCodeCalcToRadian(t)},geoCodeCalcCalcDistance:function(t,e,s,i,n){return this.writeDebug("geoCodeCalcCalcDistance",arguments),2*n*Math.asin(Math.min(1,Math.sqrt(Math.pow(Math.sin(this.geoCodeCalcDiffRadian(t,s)/2),2)+Math.cos(this.geoCodeCalcToRadian(t))*Math.cos(this.geoCodeCalcToRadian(s))*Math.pow(Math.sin(this.geoCodeCalcDiffRadian(e,i)/2),2))))},getQueryString:function(t){if(this.writeDebug("getQueryString",t),t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}},getMap:function(){return this.map},_loadTemplates:function(){var t;this.writeDebug("_loadTemplates");var s=this,i='<div class="bh-sl-error">Error: Could not load plugin templates. Check the paths and ensure they have been uploaded. Paths will be wrong if you do not run this from a web server.</div>';"kml"===this.settings.dataType&&null===this.settings.listTemplateID&&null===this.settings.infowindowTemplateID?e.when(e.get(this.settings.KMLinfowindowTemplatePath,(function(e){t=e,l=Handlebars.compile(t)})),e.get(this.settings.KMLlistTemplatePath,(function(e){t=e,r=Handlebars.compile(t)}))).then((function(){s.locator()}),(function(){throw e("."+s.settings.formContainer).append(i),new Error("Could not load storeLocator plugin templates")})):null!==this.settings.listTemplateID&&null!==this.settings.infowindowTemplateID?(l=Handlebars.compile(e("#"+this.settings.infowindowTemplateID).html()),r=Handlebars.compile(e("#"+this.settings.listTemplateID).html()),s.locator()):e.when(e.get(this.settings.infowindowTemplatePath,(function(e){t=e,l=Handlebars.compile(t)})),e.get(this.settings.listTemplatePath,(function(e){t=e,r=Handlebars.compile(t)}))).then((function(){s.locator()}),(function(){throw e("."+s.settings.formContainer).append(i),new Error("Could not load storeLocator plugin templates")}))},locator:function(){this.writeDebug("locator"),!0===this.settings.slideMap&&o.hide(),this._start(),this._formEventHandler()},_formEventHandler:function(){this.writeDebug("_formEventHandler");var t=this;!0===this.settings.noForm?(e(i).on("click."+a,"."+this.settings.formContainer+" button",(function(e){t.processForm(e)})),e(i).on("keydown."+a,(function(s){13===s.keyCode&&e("#"+t.settings.addressID).is(":focus")&&t.processForm(s)}))):e(i).on("submit."+a,"#"+this.settings.formID,(function(e){t.processForm(e)})),e(".bh-sl-reset").length&&e("#"+this.settings.mapID).length&&e(i).on("click."+a,".bh-sl-reset",(function(){t.mapReload()}))},_getData:function(s,i,n,a,o){this.writeDebug("_getData",arguments);var r=this,l="",c="",h="";if(void 0!==a&&void 0!==a.geometry.bounds&&(h=a.formatted_address,l=JSON.stringify(a.geometry.bounds.getNorthEast()),c=JSON.stringify(a.geometry.bounds.getSouthWest())),this.settings.callbackBeforeSend&&this.settings.callbackBeforeSend.call(this,s,i,n,h,l,c,o),null===r.settings.dataRaw){var u=e.Deferred();!0===this.settings.loading&&e("."+this.settings.formContainer).append('<div class="'+this.settings.loadingContainer+'"></div>');var d={origLat:s,origLng:i,origAddress:n,formattedAddress:h,boundsNorthEast:l,boundsSouthWest:c};return null!==this.settings.ajaxData&&"object"===t(this.settings.ajaxData)&&e.extend(d,this.settings.ajaxData),e.ajax({type:"GET",url:this.settings.dataLocation+("jsonp"===this.settings.dataType?(this.settings.dataLocation.match(/\?/)?"&":"?")+"callback=?":""),data:d,dataType:g,jsonpCallback:"jsonp"===this.settings.dataType?this.settings.callbackJsonp:null}).done((function(t){u.resolve(t),!0===r.settings.loading&&e("."+r.settings.formContainer+" ."+r.settings.loadingContainer).remove()})).fail(u.reject),u.promise()}return"xml"===g?e.parseXML(r.settings.dataRaw):"json"===g?Array.isArray&&Array.isArray(r.settings.dataRaw)?r.settings.dataRaw:"string"==typeof r.settings.dataRaw?JSON.parse(r.settings.dataRaw):[]:void 0},_start:function(){this.writeDebug("_start");var t,n=this,o=this.settings.autoGeocode;if(!1!==n.settings.fullMapStartBlank){e("#"+n.settings.mapID).addClass("bh-sl-map-open");var r=n.settings.mapSettings;r.zoom=n.settings.fullMapStartBlank,t=new google.maps.LatLng(this.settings.defaultLat,this.settings.defaultLng),r.center=t,n.map=new google.maps.Map(i.getElementById(n.settings.mapID),r),google.maps.event.addDomListener(s,"resize",(function(){var t=n.map.getCenter();google.maps.event.trigger(n.map,"resize"),n.map.setCenter(t)})),n.settings.fullMapStartBlank=!1,r.zoom=u}else!0===this.settings.defaultLoc&&this.defaultLocation(),""!==e.trim(e("#"+this.settings.addressID).val())?(n.writeDebug("Using Address Field"),n.processForm(null),o=!1):!0===this.settings.fullMapStart&&(!0===this.settings.querystringParams&&this.getQueryString(this.settings.addressID)||!0===this.settings.querystringParams&&this.getQueryString(this.settings.searchID)||!0===this.settings.querystringParams&&this.getQueryString(this.settings.maxDistanceID)?(n.writeDebug("Using Query String"),this.processForm(null),o=!1):this.mapping(null));!0===this.settings.autoGeocode&&!0===o&&(n.writeDebug("Auto Geo"),n.htmlGeocode()),null!==this.settings.autoGeocode&&(n.writeDebug("Button Geo"),e(i).on("click."+a,"#"+this.settings.geocodeID,(function(){n.htmlGeocode()})))},htmlGeocode:function(){this.writeDebug("htmlGeocode",arguments);var t=this;if(!0===t.settings.sessionStorage&&s.sessionStorage&&s.sessionStorage.getItem("myGeo"))return t.writeDebug("Using Session Saved Values for GEO"),t.autoGeocodeQuery(JSON.parse(s.sessionStorage.getItem("myGeo"))),!1;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){t.writeDebug("Current Position Result");var i={coords:{latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy}};!0===t.settings.sessionStorage&&s.sessionStorage&&s.sessionStorage.setItem("myGeo",JSON.stringify(i)),t.settings.callbackAutoGeoSuccess&&t.settings.callbackAutoGeoSuccess.call(this,i),t.autoGeocodeQuery(i)}),(function(e){t._autoGeocodeError(e)}))},googleGeocode:function(t){t.writeDebug("googleGeocode",arguments);var e=new google.maps.Geocoder;this.geocode=function(t,s){e.geocode(t,(function(t,e){if(e!==google.maps.GeocoderStatus.OK)throw s(null),new Error("Geocode was not successful for the following reason: "+e);var i={};i.latitude=t[0].geometry.location.lat(),i.longitude=t[0].geometry.location.lng(),i.geocodeResult=t[0],s(i)}))}},reverseGoogleGeocode:function(t){t.writeDebug("reverseGoogleGeocode",arguments);var e=new google.maps.Geocoder;this.geocode=function(t,s){e.geocode(t,(function(t,e){if(e!==google.maps.GeocoderStatus.OK)throw s(null),new Error("Reverse geocode was not successful for the following reason: "+e);if(t[0]){var i={};i.address=t[0].formatted_address,s(i)}}))}},roundNumber:function(t,e){return this.writeDebug("roundNumber",arguments),Math.round(t*Math.pow(10,e))/Math.pow(10,e)},isEmptyObject:function(t){for(var e in this.writeDebug("isEmptyObject",arguments),t)if(t.hasOwnProperty(e))return!1;return!0},hasEmptyObjectVals:function(t){this.writeDebug("hasEmptyObjectVals",arguments);var e=!0;for(var s in t)t.hasOwnProperty(s)&&""!==t[s]&&0!==t[s].length&&(e=!1);return e},modalClose:function(){this.writeDebug("modalClose"),this.settings.callbackModalClose&&this.settings.callbackModalClose.call(this),F={},e("."+this.settings.overlay+" select").prop("selectedIndex",0),e("."+this.settings.overlay+" input").prop("checked",!1),e("."+this.settings.overlay).hide()},_createLocationVariables:function(t){var e;for(var s in this.writeDebug("_createLocationVariables",arguments),P={},M[t])M[t].hasOwnProperty(s)&&(e=M[t][s],"distance"!==s&&"altdistance"!==s||(e=this.roundNumber(e,2)),P[s]=e)},sortAlpha:function(t){this.writeDebug("sortAlpha",arguments);var e=this.settings.sortBy.hasOwnProperty("prop")&&void 0!==this.settings.sortBy.prop?this.settings.sortBy.prop:"name";this.settings.sortBy.hasOwnProperty("order")&&"desc"===this.settings.sortBy.order.toString()?t.sort((function(t,s){return s[e].toLowerCase().localeCompare(t[e].toLowerCase())})):t.sort((function(t,s){return t[e].toLowerCase().localeCompare(s[e].toLowerCase())}))},sortDate:function(t){this.writeDebug("sortDate",arguments);var e=this.settings.sortBy.hasOwnProperty("prop")&&void 0!==this.settings.sortBy.prop?this.settings.sortBy.prop:"date";this.settings.sortBy.hasOwnProperty("order")&&"desc"===this.settings.sortBy.order.toString()?t.sort((function(t,s){return new Date(s[e]).getTime()-new Date(t[e]).getTime()})):t.sort((function(t,s){return new Date(t[e]).getTime()-new Date(s[e]).getTime()}))},sortNumerically:function(t){this.writeDebug("sortNumerically",arguments);var e=null!==this.settings.sortBy&&this.settings.sortBy.hasOwnProperty("prop")&&void 0!==this.settings.sortBy.prop?this.settings.sortBy.prop:"distance";null!==this.settings.sortBy&&this.settings.sortBy.hasOwnProperty("order")&&"desc"===this.settings.sortBy.order.toString()?t.sort((function(t,s){return s[e]<t[e]?-1:s[e]>t[e]?1:0})):t.sort((function(t,s){return t[e]<s[e]?-1:t[e]>s[e]?1:0}))},sortCustom:function(t){this.writeDebug("sortCustom",arguments),this.settings.sortBy.hasOwnProperty("method")&&"alpha"===this.settings.sortBy.method.toString()?this.sortAlpha(t):this.settings.sortBy.hasOwnProperty("method")&&"date"===this.settings.sortBy.method.toString()?this.sortDate(t):this.sortNumerically(t)},filterData:function(t,e){this.writeDebug("filterData",arguments);var s=!0;for(var i in e)if(e.hasOwnProperty(i))if(!0===this.settings.exclusiveFiltering||null!==this.settings.exclusiveTax&&Array.isArray(this.settings.exclusiveTax)&&-1!==this.settings.exclusiveTax.indexOf(i)){var n=e[i],a=[];if(void 0!==t[i])for(var o=0;o<n.length;o++)a[o]=new RegExp(n[o],"i").test(t[i].replace(/([^\x00-\x7F]|[.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,""));-1===a.indexOf(!0)&&(s=!1)}else void 0!==t[i]&&new RegExp(e[i].join(""),"i").test(t[i].replace(/([^\x00-\x7F]|[.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,""))||(s=!1);if(s)return!0},_paginationOutput:function(t,e){this.writeDebug("_paginationOutput",arguments);var s="",i=(t=parseFloat(t))+1,n=t-1;t>0&&(s+='<li class="bh-sl-next-prev" data-page="'+n+'">'+this.settings.prevPage+"</li>");for(var a=0;a<Math.ceil(e);a++){var o=a+1;s+=a===t?'<li class="bh-sl-current" data-page="'+a+'">'+o+"</li>":'<li data-page="'+a+'">'+o+"</li>"}return i<e&&(s+='<li class="bh-sl-next-prev" data-page="'+i+'">'+this.settings.nextPage+"</li>"),s},paginationSetup:function(t){this.writeDebug("paginationSetup",arguments);var s,i="",n=e(".bh-sl-pagination-container .bh-sl-pagination");s=-1===this.settings.storeLimit||M.length<this.settings.storeLimit?M.length/this.settings.locationsPerPage:this.settings.storeLimit/this.settings.locationsPerPage,void 0===t&&(t=0),0===n.length||n.empty(),i=this._paginationOutput(t,s),n.append(i)},markerImage:function(t,e,s){return this.writeDebug("markerImage",arguments),void 0!==e&&void 0!==s?{url:t,size:new google.maps.Size(e,s),scaledSize:new google.maps.Size(e,s)}:{url:t,size:new google.maps.Size(32,32),scaledSize:new google.maps.Size(32,32)}},createMarker:function(t,e,s,i,n,a){var o,r,l;this.writeDebug("createMarker",arguments);var g=[];if(null!==this.settings.catMarkers&&void 0!==a)if(-1!==a.indexOf(",")){g=a.split(",");for(var c=0;c<g.length;c++)g[c]in this.settings.catMarkers&&(r=this.markerImage(this.settings.catMarkers[g[c]][0],parseInt(this.settings.catMarkers[g[c]][1]),parseInt(this.settings.catMarkers[g[c]][2])))}else a in this.settings.catMarkers&&(r=this.markerImage(this.settings.catMarkers[a][0],parseInt(this.settings.catMarkers[a][1]),parseInt(this.settings.catMarkers[a][2])));return null!==this.settings.markerImg&&(r=null===this.settings.markerDim?this.markerImage(this.settings.markerImg):this.markerImage(this.settings.markerImg,this.settings.markerDim.width,this.settings.markerDim.height)),this.settings.callbackCreateMarker?o=this.settings.callbackCreateMarker.call(this,n,t,i,a):!0===this.settings.disableAlphaMarkers||-1===this.settings.storeLimit||this.settings.storeLimit>26||null!==this.settings.catMarkers||null!==this.settings.markerImg||!0===this.settings.fullMapStart&&!0===L&&(isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||-1===this.settings.fullMapStartListLimit)?o=new google.maps.Marker({position:t,map:n,draggable:!1,icon:r}):(l={url:"https://mt.googleapis.com/vt/icon/name=icons/spotlight/spotlight-waypoint-b.png&text="+i+"&psize=16&font=fonts/Roboto-Regular.ttf&color=ff333333&ax=44&ay=48"},o=new google.maps.Marker({position:t,map:n,icon:l,draggable:!1})),o},_defineLocationData:function(t,s,i){this.writeDebug("_defineLocationData",arguments);var n,a,o="";this._createLocationVariables(t.get("id")),P.distance<=1?"km"===this.settings.lengthUnit?(a=this.settings.kilometerLang,n=this.settings.mileLang):(a=this.settings.mileLang,n=this.settings.kilometerLang):"km"===this.settings.lengthUnit?(a=this.settings.kilometersLang,n=this.settings.milesLang):(a=this.settings.milesLang,n=this.settings.kilometersLang);var r=t.get("id");return o=!0===this.settings.disableAlphaMarkers||-1===this.settings.storeLimit||this.settings.storeLimit>26||!0===this.settings.fullMapStart&&!0===L&&(isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||-1===this.settings.fullMapStartListLimit)?r+1:i>0?String.fromCharCode("A".charCodeAt(0)+(s+r)):String.fromCharCode("A".charCodeAt(0)+r),{location:[e.extend(P,{markerid:r,marker:o,altlength:n,length:a,origin:c})]}},listSetup:function(t,s,i){this.writeDebug("listSetup",arguments);var n=this._defineLocationData(t,s,i),a=r(n);e("."+this.settings.locationList+" > ul").append(a)},changeSelectedMarker:function(t){var e;void 0!==D&&D.setIcon(w),e=null===this.settings.selectedMarkerImgDim?this.markerImage(this.settings.selectedMarkerImg):this.markerImage(this.settings.selectedMarkerImg,this.settings.selectedMarkerImgDim.width,this.settings.selectedMarkerImgDim.height),w=t.icon,t.setIcon(e),D=t},createInfowindow:function(t,s,i,n,a){this.writeDebug("createInfowindow",arguments);var o=this,r=this._defineLocationData(t,n,a),g=l(r);"left"===s?(i.setContent(g),i.open(t.get("map"),t)):google.maps.event.addListener(t,"click",(function(){i.setContent(g),i.open(t.get("map"),t);var s=t.get("id"),n=e("."+o.settings.locationList+" li[data-markerid="+s+"]");if(n.length>0){o.settings.callbackMarkerClick&&o.settings.callbackMarkerClick.call(this,t,s,n,M[s]),e("."+o.settings.locationList+" li").removeClass("list-focus"),n.addClass("list-focus");var a=e("."+o.settings.locationList);a.animate({scrollTop:n.offset().top-a.offset().top+a.scrollTop()})}null!==o.settings.selectedMarkerImg&&o.changeSelectedMarker(t)}))},autoGeocodeQuery:function(t){this.writeDebug("autoGeocodeQuery",arguments);var s,i=this,n=null,a=e("#"+this.settings.maxDistanceID);!0===this.settings.querystringParams&&this.getQueryString(this.settings.maxDistanceID)?(n=this.getQueryString(this.settings.maxDistanceID),""!==a.val()&&(n=a.val())):!0===this.settings.maxDistance&&(n=a.val()||"");var o=new this.reverseGoogleGeocode(this),r=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);o.geocode({latLng:r},(function(a){null!==a?(s=m=a.address,f=O.lat=t.coords.latitude,b=O.lng=t.coords.longitude,O.origin=s,O.distance=n,i.mapping(O),void 0!==s&&e("#"+i.settings.addressID).val(s)):i.notify(i.settings.addressErrorAlert)}))},_autoGeocodeError:function(){this.writeDebug("_autoGeocodeError"),this.notify(this.settings.autoGeocodeErrorAlert)},defaultLocation:function(){this.writeDebug("defaultLocation");var t,s=this,i=null,n=e("#"+this.settings.maxDistanceID);!0===this.settings.querystringParams&&this.getQueryString(this.settings.maxDistanceID)?(i=this.getQueryString(this.settings.maxDistanceID),""!==n.val()&&(i=n.val())):!0===this.settings.maxDistance&&(i=n.val()||"");var a=new this.reverseGoogleGeocode(this),o=new google.maps.LatLng(this.settings.defaultLat,this.settings.defaultLng);a.geocode({latLng:o},(function(e){null!==e?(t=m=e.address,f=O.lat=s.settings.defaultLat,b=O.lng=s.settings.defaultLng,O.distance=i,O.origin=t,s.mapping(O)):s.notify(s.settings.addressErrorAlert)}))},paginationChange:function(t){this.writeDebug("paginationChange",arguments),this.settings.callbackPageChange&&this.settings.callbackPageChange.call(this,t),O.page=t,this.mapping(O)},getAddressByMarker:function(t){this.writeDebug("getAddressByMarker",arguments);var e="";return M[t].address&&(e+=M[t].address+" "),M[t].address2&&(e+=M[t].address2+" "),M[t].city&&(e+=M[t].city+", "),M[t].state&&(e+=M[t].state+" "),M[t].postal&&(e+=M[t].postal+" "),M[t].country&&(e+=M[t].country+" "),e},clearMarkers:function(){this.writeDebug("clearMarkers");var t=null;t=M.length<this.settings.storeLimit?M.length:this.settings.storeLimit;for(var e=0;e<t;e++)x[e].setMap(null)},directionsRequest:function(t,s,n){this.writeDebug("directionsRequest",arguments),this.settings.callbackDirectionsRequest&&this.settings.callbackDirectionsRequest.call(this,t,s,n,M[s]);var a=this.getAddressByMarker(s);if(a){e("."+this.settings.locationList+" ul").hide(),this.clearMarkers(),null!=y&&(y.setMap(null),y=null),y=new google.maps.DirectionsRenderer,k=new google.maps.DirectionsService,y.setMap(n),y.setPanel(e(".bh-sl-directions-panel").get(0));var o={origin:t,destination:a,travelMode:google.maps.TravelMode.DRIVING};k.route(o,(function(t,e){e===google.maps.DirectionsStatus.OK&&y.setDirections(t)})),e("."+this.settings.locationList).prepend('<div class="bh-sl-close-directions-container"><div class="'+this.settings.closeIcon+'"></div></div>')}e(i).off("click","."+this.settings.locationList+" li .loc-directions a")},closeDirections:function(){this.writeDebug("closeDirections"),this.settings.callbackCloseDirections&&this.settings.callbackCloseDirections.call(this),this.reset(),f&&b&&(0===this.countFilters()?this.settings.mapSettings.zoom=u:this.settings.mapSettings.zoom=0,this.processForm(null)),e(i).off("click."+a,"."+this.settings.locationList+" .bh-sl-close-icon")},lengthUnitSwap:function(t){this.writeDebug("lengthUnitSwap",arguments),"alt-distance"===t.val()?(e("."+this.settings.locationList+" .loc-alt-dist").show(),e("."+this.settings.locationList+" .loc-default-dist").hide()):"default-distance"===t.val()&&(e("."+this.settings.locationList+" .loc-default-dist").show(),e("."+this.settings.locationList+" .loc-alt-dist").hide())},processForm:function(t){this.writeDebug("processForm",arguments);var s=this,i=null,n={},a=e("#"+this.settings.addressID),o=e("#"+this.settings.searchID),r=e("#"+this.settings.maxDistanceID),l="";if(null!=t&&t.preventDefault(),e("."+s.settings.formContainer+" input, ."+s.settings.formContainer+" select").blur(),!0===this.settings.querystringParams&&(this.getQueryString(this.settings.addressID)||this.getQueryString(this.settings.searchID)||this.getQueryString(this.settings.maxDistanceID))?(m=this.getQueryString(this.settings.addressID),p=this.getQueryString(this.settings.searchID),i=this.getQueryString(this.settings.maxDistanceID),""!==a.val()&&(m=a.val()),""!==o.val()&&(p=o.val()),""!==r.val()&&(i=r.val())):(m=a.val()||"",p=o.val()||"",!0===this.settings.maxDistance&&(i=r.val()||"")),l=this.settings.callbackRegion?this.settings.callbackRegion.call(this,m,p,i):e("#"+this.settings.regionID).val(),this.settings.callbackFormVals&&this.settings.callbackFormVals.call(this,m,p,i,l),void 0!==l&&(n={country:l}),"function"==typeof this.settings.callbackGeocodeRestrictions&&(n=this.settings.callbackGeocodeRestrictions.call(this,m,p,i)),""===m&&""===p&&!0!==this.settings.autoGeocode)this._start();else if(""!==m)if(void 0!==c&&void 0!==f&&void 0!==b&&m===c)O.lat=f,O.lng=b,O.origin=m,O.name=p,O.distance=i,s.mapping(O);else{var g=new this.googleGeocode(this);g.geocode({address:m,componentRestrictions:n,region:l},(function(t){null!==t?(f=t.latitude,b=t.longitude,O.lat=f,O.lng=b,O.origin=m,O.name=p,O.distance=i,O.geocodeResult=t.geocodeResult,s.mapping(O)):s.notify(s.settings.addressErrorAlert)}))}else""!==p?(""===m&&delete O.origin,O.name=p,s.mapping(O)):!0===this.settings.autoGeocode&&(O.lat=f,O.lng=b,O.origin=m,O.name=p,O.distance=i,s.mapping(O))},locationsSetup:function(t,e,s,i,n){if(this.writeDebug("locationsSetup",arguments),void 0!==i&&(t.distance||(t.distance=this.geoCodeCalcCalcDistance(e,s,t.lat,t.lng,R.EarthRadius),"m"===this.settings.lengthUnit?t.altdistance=1.609344*parseFloat(t.distance):"km"===this.settings.lengthUnit&&(t.altdistance=parseFloat(t.distance)/1.609344))),!0===this.settings.maxDistance&&null!=n){if(!(t.distance<=n))return;M.push(t)}else if(!0===this.settings.maxDistance&&!0===this.settings.querystringParams&&null!=n){if(!(t.distance<=n))return;M.push(t)}else M.push(t)},sorting:function(){this.writeDebug("sorting",arguments);var t=this,s=e("#"+t.settings.mapID),i=e("#"+t.settings.sortID);0!==i.length&&i.on("change."+a,(function(i){var n,a;i.stopPropagation(),!0===t.settings.pagination&&t.paginationChange(0),n=void 0!==e(this).find(":selected").attr("data-method")?e(this).find(":selected").attr("data-method"):"distance",a=e(this).val(),t.settings.sortBy.method=n,t.settings.sortBy.prop=a,t.settings.callbackSorting&&t.settings.callbackSorting.call(this,t.settings.sortBy),s.hasClass("bh-sl-map-open")&&t.mapping(O)}))},order:function(){this.writeDebug("order",arguments);var t=this,s=e("#"+t.settings.mapID),i=e("#"+t.settings.orderID);0!==i.length&&i.on("change."+a,(function(i){i.stopPropagation(),!0===t.settings.pagination&&t.paginationChange(0),t.settings.sortBy.order=e(this).val(),t.settings.callbackOrder&&t.settings.callbackOrder.call(this,t.settings.order),s.hasClass("bh-sl-map-open")&&t.mapping(O)}))},countFilters:function(){this.writeDebug("countFilters");var t=0;if(!this.isEmptyObject(F))for(var e in F)F.hasOwnProperty(e)&&(t+=F[e].length);return t},_existingCheckedFilters:function(t){this.writeDebug("_existingCheckedFilters",arguments),e("#"+this.settings.taxonomyFilters[t]+" input[type=checkbox]").each((function(){if(e(this).prop("checked")){var s=e(this).val();void 0!==s&&""!==s&&-1===F[t].indexOf(s)&&F[t].push(s)}}))},_existingSelectedFilters:function(t){this.writeDebug("_existingSelectedFilters",arguments),e("#"+this.settings.taxonomyFilters[t]+" select").each((function(){var s=e(this).val();void 0!==s&&""!==s&&-1===F[t].indexOf(s)&&(F[t]=[s])}))},_existingRadioFilters:function(t){this.writeDebug("_existingRadioFilters",arguments),e("#"+this.settings.taxonomyFilters[t]+" input[type=radio]").each((function(){if(e(this).prop("checked")){var s=e(this).val();void 0!==s&&""!==s&&-1===F[t].indexOf(s)&&(F[t]=[s])}}))},checkFilters:function(){for(var t in this.writeDebug("checkFilters"),this.settings.taxonomyFilters)this.settings.taxonomyFilters.hasOwnProperty(t)&&(this._existingCheckedFilters(t),this._existingSelectedFilters(t),this._existingRadioFilters(t))},selectQueryStringFilters:function(t,s){this.writeDebug("selectQueryStringFilters",arguments);var i=e("#"+this.settings.taxonomyFilters[t]);if(i.find('input[type="checkbox"]').length)for(var n=0;n<s.length;n++)i.find('input:checkbox[value="'+s[n]+'"]').prop("checked",!0);i.find("select").length&&i.find('option[value="'+s[0]+'"]').prop("selected",!0),i.find('input[type="radio"]').length&&i.find('input:radio[value="'+s[0]+'"]').prop("checked",!0)},checkQueryStringFilters:function(){for(var t in this.writeDebug("checkQueryStringFilters",arguments),F)if(F.hasOwnProperty(t)){var e=this.getQueryString(t);-1!==e.indexOf(",")&&(e=e.split(",")),void 0!==e&&""!==e&&-1===F[t].indexOf(e)&&(Array.isArray(e)?F[t]=e:F[t]=[e]),F[t].length&&this.selectQueryStringFilters(t,F[t])}},getFilterKey:function(t){for(var e in this.writeDebug("getFilterKey",arguments),this.settings.taxonomyFilters)if(this.settings.taxonomyFilters.hasOwnProperty(e))for(var s=0;s<this.settings.taxonomyFilters[e].length;s++)if(this.settings.taxonomyFilters[e]===t)return e},taxonomyFiltersInit:function(){for(var t in this.writeDebug("taxonomyFiltersInit"),this.settings.taxonomyFilters)this.settings.taxonomyFilters.hasOwnProperty(t)&&(F[t]=[])},taxonomyFiltering:function(){this.writeDebug("taxonomyFiltering");var t=this;t.taxonomyFiltersInit(),t.checkQueryStringFilters(),e("."+this.settings.taxonomyFiltersContainer).on("change."+a,"input, select",(function(s){var i,n,a;if(s.stopPropagation(),!0===t.settings.pagination&&t.paginationChange(0),e(this).is('input[type="checkbox"]')){if(t.checkFilters(),i=e(this).val(),n=e(this).closest(".bh-sl-filters").attr("id"),a=t.getFilterKey(n))if(e(this).prop("checked"))-1===F[a].indexOf(i)&&F[a].push(i),!0===e("#"+t.settings.mapID).hasClass("bh-sl-map-open")&&(f&&b?(t.settings.mapSettings.zoom=0,t.processForm()):t.mapping(O));else{var o=F[a].indexOf(i);o>-1&&(F[a].splice(o,1),!0===e("#"+t.settings.mapID).hasClass("bh-sl-map-open")&&(f&&b?(0===t.countFilters()?t.settings.mapSettings.zoom=u:t.settings.mapSettings.zoom=0,t.processForm()):t.mapping(O)))}}else(e(this).is("select")||e(this).is('input[type="radio"]'))&&(t.checkFilters(),i=e(this).val(),n=e(this).closest(".bh-sl-filters").attr("id"),a=t.getFilterKey(n),i?a&&(F[a]=[i],!0===e("#"+t.settings.mapID).hasClass("bh-sl-map-open")&&(f&&b?(t.settings.mapSettings.zoom=0,t.processForm()):t.mapping(O))):(a&&(F[a]=[]),t.reset(),f&&b?(t.settings.mapSettings.zoom=u,t.processForm()):t.mapping(O)))}))},checkVisibleMarkers:function(t,s){this.writeDebug("checkVisibleMarkers",arguments);var i,n,a=this;e("."+this.settings.locationList+" ul").empty(),e(t).each((function(t,o){s.getBounds().contains(o.getPosition())&&(a.listSetup(o,0,0),n=r(i),e("."+a.settings.locationList+" > ul").append(n))})),e("."+this.settings.locationList+" ul li:even").css("background",this.settings.listColor1),e("."+this.settings.locationList+" ul li:odd").css("background",this.settings.listColor2)},dragSearch:function(t){this.writeDebug("dragSearch",arguments);var e,s=t.getCenter(),i=this;this.settings.mapSettings.zoom=t.getZoom(),f=O.lat=s.lat(),b=O.lng=s.lng();var n=new this.reverseGoogleGeocode(this);e=new google.maps.LatLng(O.lat,O.lng),n.geocode({latLng:e},(function(t){null!==t?(O.origin=m=t.address,i.mapping(O)):i.notify(i.settings.addressErrorAlert)}))},emptyResult:function(){this.writeDebug("emptyResult",arguments);var t,s,n=e("."+this.settings.locationList+" ul"),a=this.settings.mapSettings;this.map=new google.maps.Map(i.getElementById(this.settings.mapID),a),this.settings.callbackNoResults&&this.settings.callbackNoResults.call(this,this.map,a),n.empty(),s=e('<li><div class="bh-sl-noresults-title">'+this.settings.noResultsTitle+'</div><br><div class="bh-sl-noresults-desc">'+this.settings.noResultsDesc+"</li>").hide().fadeIn(),n.append(s),t=f&&b?new google.maps.LatLng(f,b):new google.maps.LatLng(0,0),this.map.setCenter(t),u&&this.map.setZoom(u)},originMarker:function(t,e,s){if(this.writeDebug("originMarker",arguments),!0===this.settings.originMarker){var i="";void 0!==e&&(i=null!==this.settings.originMarkerImg?null===this.settings.originMarkerDim?this.markerImage(this.settings.originMarkerImg):this.markerImage(this.settings.originMarkerImg,this.settings.originMarkerDim.width,this.settings.originMarkerDim.height):{url:"https://mt.googleapis.com/vt/icon/name=icons/spotlight/spotlight-waypoint-a.png"},new google.maps.Marker({position:s,map:t,icon:i,draggable:!1}))}},modalWindow:function(){if(this.writeDebug("modalWindow"),!0===this.settings.modal){var t=this;t.settings.callbackModalOpen&&t.settings.callbackModalOpen.call(this),e("."+t.settings.overlay).fadeIn(),e(i).on("click."+a,"."+t.settings.closeIcon+", ."+t.settings.overlay,(function(){t.modalClose()})),e(i).on("click."+a,"."+t.settings.modalWindow,(function(t){t.stopPropagation()})),e(i).on("keyup."+a,(function(e){27===e.keyCode&&t.modalClose()}))}},openNearestLocation:function(t,s,i,n){if(this.writeDebug("openNearestLocation",arguments),!(!0!==this.settings.openNearest||void 0===t||!0===this.settings.fullMapStart&&!0===L||!0===this.settings.defaultLoc&&!0===L)){var a=this;a.settings.callbackNearestLoc&&a.settings.callbackNearestLoc.call(this,a.map,t,s,i,n);var o=0,r=x[o];a.createInfowindow(r,"left",s,i,n);var l=e("."+a.settings.locationList),g=e("."+a.settings.locationList+" li[data-markerid="+o+"]");e("."+a.settings.locationList+" li").removeClass("list-focus"),g.addClass("list-focus"),l.animate({scrollTop:g.offset().top-l.offset().top+l.scrollTop()})}},listClick:function(t,s,n,o){this.writeDebug("listClick",arguments);var r=this;e(i).on("click."+a,"."+r.settings.locationList+" li",(function(){var i=e(this).data("markerid"),a=x[i];r.settings.callbackListClick&&r.settings.callbackListClick.call(this,i,a,M[i],t),t.panTo(a.getPosition());var l="left";!0===r.settings.bounceMarker?(a.setAnimation(google.maps.Animation.BOUNCE),setTimeout((function(){a.setAnimation(null),r.createInfowindow(a,l,s,n,o)}),700)):r.createInfowindow(a,l,s,n,o),null!==r.settings.selectedMarkerImg&&r.changeSelectedMarker(a),e("."+r.settings.locationList+" li").removeClass("list-focus"),e("."+r.settings.locationList+" li[data-markerid="+i+"]").addClass("list-focus")})),e(i).on("click."+a,"."+r.settings.locationList+" li a",(function(t){t.stopPropagation()}))},resultsTotalCount:function(t){this.writeDebug("resultsTotalCount",arguments);var s=e(".bh-sl-total-results");void 0===t||t<=0||0===s.length||s.text(t)},inlineDirections:function(t,s){if(this.writeDebug("inlineDirections",arguments),!0===this.settings.inlineDirections&&void 0!==s){var n=this;e(i).on("click."+a,"."+n.settings.locationList+" li .loc-directions a",(function(o){o.preventDefault();var r=e(this).closest("li").attr("data-markerid");n.directionsRequest(s,parseInt(r),t),e(i).on("click."+a,"."+n.settings.locationList+" .bh-sl-close-icon",(function(){n.closeDirections()}))}))}},visibleMarkersList:function(t,e){if(this.writeDebug("visibleMarkersList",arguments),!0===this.settings.visibleMarkersList){var s=this;google.maps.event.addListenerOnce(t,"idle",(function(){s.checkVisibleMarkers(e,t)})),google.maps.event.addListener(t,"center_changed",(function(){s.checkVisibleMarkers(e,t)})),google.maps.event.addListener(t,"zoom_changed",(function(){s.checkVisibleMarkers(e,t)}))}},mapping:function(t){this.writeDebug("mapping",arguments);var e,s,i,n,a,o,r=this;this.isEmptyObject(t)||(e=t.lat,s=t.lng,i=t.geocodeResult,n=t.origin,o=t.page),!0===r.settings.pagination&&(void 0!==o&&c===m||(o=0)),void 0===n&&!0===this.settings.nameSearch?d=r._getData():(a=new google.maps.LatLng(e,s),void 0!==c&&n===c&&void 0!==h?(n=c,d=h):d=r._getData(f,b,n,i,t)),null!==r.settings.taxonomyFilters&&r.hasEmptyObjectVals(F)&&r.checkFilters(),null!==r.settings.dataRaw?r.processData(t,a,d,o):d.done((function(e){r.processData(t,a,e,o)}))},processData:function(n,r,l,g){this.writeDebug("processData",arguments);var m,f,b,y,k,w,D,P,R,O,T,A,B,G=this,E=0,_={},N=e("#"+G.settings.lengthSwapID);this.isEmptyObject(n)||(m=n.lat,f=n.lng,b=n.origin,n.name,y=n.distance);var j=e("#"+G.settings.mapID),z="km"===G.settings.lengthUnit?G.settings.kilometersLang:G.settings.milesLang;if(h=d,void 0!==b&&(c=b),G.settings.callbackSuccess&&G.settings.callbackSuccess.call(this,n,r,l,g),T=j.hasClass("bh-sl-map-open"),!0===G.settings.fullMapStart&&!1===T||!0===G.settings.autoGeocode&&!1===T||!0===G.settings.defaultLoc&&!1===T||!0===S?L=!0:G.reset(),j.addClass("bh-sl-map-open"),"json"===G.settings.dataType||"jsonp"===G.settings.dataType)for(var Q=0;E<l.length;Q++){var q=l[Q],U={};for(var V in q)q.hasOwnProperty(V)&&(U[V]=q[V]);G.locationsSetup(U,m,f,b,y),E++}else"kml"===G.settings.dataType?e(l).find("Placemark").each((function(){var t={name:e(this).find("name").text(),lat:e(this).find("coordinates").text().split(",")[1],lng:e(this).find("coordinates").text().split(",")[0],description:e(this).find("description").text()};G.locationsSetup(t,m,f,b,y),E++})):e(l).find(G.settings.xmlElement).each((function(){var t={};for(var e in this.attributes)this.attributes.hasOwnProperty(e)&&(t[this.attributes[e].name]=this.attributes[e].value);G.locationsSetup(t,m,f,b,y),E++}));if(!0===G.settings.nameSearch&&void 0!==p&&(F[G.settings.nameAttribute]=[p]),null!==G.settings.taxonomyFilters||!0===G.settings.nameSearch){for(var H in F)if(F.hasOwnProperty(H)&&F[H].length>0)for(var K=0;K<F[H].length;K++)_[H]||(_[H]=[]),_[H][K]="(?=.*\\b"+F[H][K].replace(/([^\x00-\x7F]|[.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,"")+"\\b)";G.isEmptyObject(_)||(M=e.grep(M,(function(t){return G.filterData(t,_)})))}if(null!==G.settings.sortBy&&"object"===t(G.settings.sortBy))G.sortCustom(M);else{if(void 0!==b&&G.sortNumerically(M),G.isEmptyObject(_))if(!0===G.settings.maxDistance&&y)(void 0===M[0]||M[0].distance>y)&&G.notify(G.settings.distanceErrorAlert+y+" "+z);else{if(void 0===M[0])throw new Error("No locations found. Please check the dataLocation setting and path.");-1!==G.settings.distanceAlert&&M[0].distance>G.settings.distanceAlert&&(G.notify(G.settings.distanceErrorAlert+G.settings.distanceAlert+" "+z),O=!0)}void 0!==M[0]&&(B=M[0])}if(!0===G.settings.featuredLocations&&(C=e.grep(M,(function(t){return"true"===t.featured})),I=e.grep(M,(function(t){return"true"!==t.featured})),M=[],M=C.concat(I)),!0===G.settings.slideMap&&o.slideDown(),!0===G.settings.pagination&&G.paginationSetup(g),!0===G.settings.altDistanceNoResult&&B.distance>G.settings.distanceAlert)G.emptyResult();else if(G.isEmptyObject(M)||"none"===M[0].result)G.emptyResult();else{if(G.modalWindow(),v=-1===G.settings.storeLimit||M.length<G.settings.storeLimit||!0===this.settings.fullMapStart&&!0===L&&(!isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||-1===this.settings.fullMapStartListLimit)?M.length:G.settings.storeLimit,!0===G.settings.pagination?(P=G.settings.locationsPerPage,(D=g*G.settings.locationsPerPage)+P>M.length&&(P=G.settings.locationsPerPage-(D+P-M.length)),M=M.slice(D,D+P),v=M.length):(P=v,D=0),G.resultsTotalCount(M.length),!0===G.settings.fullMapStart&&!0===L&&!0!==G.settings.querystringParams||0===G.settings.mapSettings.zoom||void 0===b||!0===O)R=G.settings.mapSettings,w=new google.maps.LatLngBounds;else if(!0===G.settings.pagination){var W=new google.maps.LatLng(M[0].lat,M[0].lng);0===g?(G.settings.mapSettings.center=r,R=G.settings.mapSettings):(G.settings.mapSettings.center=W,R=G.settings.mapSettings)}else G.settings.mapSettings.center=r,R=G.settings.mapSettings;if(G.map=new google.maps.Map(i.getElementById(G.settings.mapID),R),google.maps.event.addDomListener(s,"resize",(function(){var t=G.map.getCenter();google.maps.event.trigger(G.map,"resize"),G.map.setCenter(t)})),!0===G.settings.dragSearch&&G.map.addListener("dragend",(function(){G.dragSearch(G.map)})),o.data(G.settings.mapID.replace("#",""),G.map),G.settings.callbackMapSet&&G.settings.callbackMapSet.call(this,G.map,r,u,R),"undefined"!=typeof InfoBubble&&null!==G.settings.infoBubble){var J=G.settings.infoBubble;J.map=G.map,A=new InfoBubble(J)}else A=new google.maps.InfoWindow;G.originMarker(G.map,b,r),e(i).on("click."+a,".bh-sl-pagination li",(function(t){t.preventDefault(),G.paginationChange(e(this).attr("data-page"))})),G.inlineDirections(G.map,b);for(var $=0;$<=P-1;$++){var Z="";Z=g>0?String.fromCharCode("A".charCodeAt(0)+(D+$)):String.fromCharCode("A".charCodeAt(0)+$);var X=new google.maps.LatLng(M[$].lat,M[$].lng);(k=G.createMarker(X,M[$].name,M[$].address,Z,G.map,M[$].category)).set("id",$),x[$]=k,(!0===G.settings.fullMapStart&&!0===L&&!0!==G.settings.querystringParams||0===G.settings.mapSettings.zoom||void 0===b||!0===O)&&w.extend(X),G.createInfowindow(k,null,A,D,g)}(!0===G.settings.fullMapStart&&!0===L&&!0!==G.settings.querystringParams||0===G.settings.mapSettings.zoom||void 0===b||!0===O)&&G.map.fitBounds(w);var Y=e("."+G.settings.locationList+" ul");if(Y.empty(),L&&!1!==G.settings.fullMapStartListLimit&&!isNaN(G.settings.fullMapStartListLimit)&&-1!==G.settings.fullMapStartListLimit)for(var tt=0;tt<G.settings.fullMapStartListLimit;tt++){var et=x[tt];G.listSetup(et,D,g)}else e(x).each((function(t){var e=x[t];G.listSetup(e,D,g)}));if(N.length&&(G.lengthUnitSwap(N),N.on("change."+a,(function(t){t.stopPropagation(),G.lengthUnitSwap(N)}))),G.openNearestLocation(B,A,D,g),"undefined"!=typeof MarkerClusterer&&null!==G.settings.markerCluster)new MarkerClusterer(G.map,x,G.settings.markerCluster);G.listClick(G.map,A,D,g),e("."+G.settings.locationList+" ul > li:even").css("background",G.settings.listColor1),e("."+G.settings.locationList+" ul > li:odd").css("background",G.settings.listColor2),G.visibleMarkersList(G.map,x),!0===G.settings.modal&&G.settings.callbackModalReady&&G.settings.callbackModalReady.call(this,n),G.settings.callbackFilters&&G.settings.callbackFilters.call(this,F,n)}},writeDebug:function(){s.console&&this.settings.debug&&(Function.prototype.bind?this.writeDebug=Function.prototype.bind.call(console.log,console,"StoreLocator :"):this.writeDebug=function(){arguments[0]="StoreLocator : "+arguments[0],Function.prototype.apply.call(console.log,console,arguments)},this.writeDebug.apply(this,arguments))}}),e.fn[a]=function(s){var i,o=arguments;return s===n||"object"===t(s)?this.each((function(){e.data(this,"plugin_"+a)||e.data(this,"plugin_"+a,new A(this,s))})):"string"==typeof s&&"_"!==s[0]&&"init"!==s?(this.each((function(){var t=e.data(this,"plugin_"+a);t instanceof A&&"function"==typeof t[s]&&(i=t[s].apply(t,Array.prototype.slice.call(o,1))),"destroy"===s&&e.data(this,"plugin_"+a,null)})),i!==n?i:this):void 0}}function A(t,s){o=e(t),this.element=t,this.settings=e.extend({},T,s),this._defaults=T,this._name=a,this.init()}}(jQuery,window,document)})();